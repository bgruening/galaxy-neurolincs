<tool id="export_to_cdr" name="Export datasets to AnswerALS CDR" version="0.0.1">

    <command detect_errors="aggressive">
<![CDATA[
python '$__tool_directory__/export_to_cluster.py' -d '/globus/${exp.consortium}_${lvl.assay}/${lvl.level}/${exp.experiment}/${protocol}' -p "/globus/"
#for $d in $datasets
    '${d}' '${d.name}' '${d.ext}'
#end for
> '$log'
]]>
    </command>
    <inputs>
        <param name="datasets" type="data" format="data" multiple="true" label="Datasets to export" />

        <conditional name="exp">
            <param type="select" name="consortium" label="Consortium">
                <option value="aals" selected="true">AnswerALS</option>
                <option value="neurolincs">NeuroLINCS</option>
            </param>
            <when value="neurolincs">
                <param type="select" name="experiment" label="Experiment">
                    <option value="0_iPSC" selected="true">0_iPSC</option>
                    <option value="1_iMN">1_iMN</option>
                    <option value="2_diMN18">2_diMN18</option>
                    <option value="3_diMN32">3_diMN32</option>
                </param>
            </when>
            <when value="aals">
                <param type="select" name="experiment" label="Experiment">
                    <option value="4_protocol_selection" selected="true">4_protocol_selection</option>
                    <option value="5_100_lines">5_100_lines</option>
                </param>
            </when>
        </conditional>

        <conditional name="lvl">
            <param type="select" name="assay" label="Assay">
                <option value="epigenomics" selected="true">Epigenomics</option>
                <option value="transcriptomics">Transcriptomics</option>
                <option value="proteomics">Proteomics</option>
            </param>
            <when value="epigenomics">
                <param type="select" name="level" label="Data Level">
                    <option value="level1_fastq" selected="true">level1_fastq</option>
                    <option value="level2_bam">level2_bam</option>
                    <option value="level3_peaks">level3_peaks</option>
                </param>
            </when>
            <when value="transcriptomics">
                <param type="select" name="level" label="Data Level">
                    <option value="level1_fastq" selected="true">level1_fastq</option>
                    <option value="level2_bam">level2_bam</option>
                    <option value="level3_counts">level3_counts</option>
                </param>
            </when>
            <when value="proteomics">
                <param type="select" name="level" label="Data Level">
                    <option value="level1_wiff" selected="true">level1_wiff</option>
                    <option value="level2_mzml">level2_mzml</option>
                    <option value="level3_spectra">level3_spectra</option>
                </param>
            </when>
        </conditional>

        <param type="select" name="protocol" label="Differentiation Protocol">
            <option value="iPSC">iPSC</option>
            <option value="iMN">iMN</option>
            <option value="diMN18">diMN18</option>
            <option value="diMN32" selected="true">diMN32</option>
            <option value="diMN60">diMN60</option>
        </param>

    </inputs>
    <outputs>
        <data name="log" format="txt" />
    </outputs>
    <tests>
    </tests>
    <help></help>
    <citations/>
</tool>








